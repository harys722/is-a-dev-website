<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta http-equiv="x-ua-compatible" content="ie=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />

        <!-- HTML Meta Tags -->
        <title>is-a.dev - Free subdomains for developers</title>
        <meta name="description" content="A service to allow developers to get free `.is-a.dev` subdomains" />
        <meta name="theme-color" content="#4E3AA3" />

        <!-- Google / Search Engine Tags -->
        <meta itemprop="name" content="is-a.dev" />
        <meta itemprop="description" content="A service to allow developers to get free `.is-a.dev` subdomains" />
        <meta itemprop="image" content="https://is-a.dev/assets/logo.png" />

        <!-- Facebook Meta Tags -->
        <meta property="og:url" content="https://is-a.dev/" />
        <meta property="og:type" content="website" />
        <meta property="og:title" content="is-a.dev" />
        <meta property="og:description" content="A service to allow developers to get free `.is-a.dev` subdomains" />
        <meta property="og:image" content="https://is-a.dev/assets/logo.png" />

        <!-- Twitter Meta Tags -->
        <meta name="twitter:card" content="summary_large_image" />
        <meta name="twitter:title" content="is-a.dev" />
        <meta name="twitter:description" content="A service to allow developers to get free `.is-a.dev` subdomains" />
        <meta name="twitter:image" content="https://is-a.dev/assets/logo.png" />

        <!-- Apple Meta Tags -->
        <meta name="apple-mobile-web-app-title" content="is-a.dev" />
        <meta name="apple-mobile-web-app-capable" content="yes" />
        <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

        <!-- Favicon -->
        <link rel="icon" type="image/x-icon" href="assets/favicon.ico" />

        <!-- Stylesheets -->
        <link rel="stylesheet" href="styles/main.css" />
        <link rel="stylesheet" href="https://cdn.hrsn.net/is-a-dev/website/fonts/Roboto/font.css" />
        <link rel="stylesheet" href="https://cdn.hrsn.net/is-a-dev/website/fonts/UbuntuMono/font.css" />

        <!-- Scripts -->
        <script defer data-domain="is-a.dev" src="https://analytics.hrsn.net/js/script.js"></script>
    </head>

    <body>
        <main>
            <div class="banner"><img src="https://raw.githubusercontent.com/is-a-dev/register/main/media/banner.png" alt="is-a.dev" style="max-width: 100%; height: auto;" /></div>
            <h3>Grab your own sweet-looking <span>.is-a.dev</span> subdomain.</h3>

            <p>
                To register your own subdomain, visit the
                <a href="https://github.com/is-a-dev/register" target="_blank">is-a-dev/register</a>
                repository on GitHub and follow the provided instructions.
            </p>

            <script async type="text/javascript"
                src="//cdn.carbonads.com/carbon.js?serve=CW7DE2JU&placement=is-adev&format=cover"
                id="_carbonads_js"></script>

            <h2>Check SubDomain Availability</h2>
            <div class="search-cntnr">
                <input id="search-domain" type="text" placeholder="e.g. william">
            <div id="search-btn" class="search-tip">
                Check
            </div>
            </div>
            <div class="search-result-cntnr">
                <div id="result-card" class="hiddens result-card">
                        <div class="user-infos">
                            <img id="user-avatar" class="user-avatar" alt="user-avatar" src="http://github.com/wdhdev.png?size=64">
                            <div style="display:flex;flex-direction:column;width:100%">
                                <a id="user-gh-link" href="htttps://github.com/wdhdev">
                                    <h2 id="user-name" style="line-height:1rem">William</h2>
                                </a>
                                <a id="user-website-link" href="https://william.is-a.dev" style="margin-top:-1.3rem;font-size:1rem">william.is-a.dev</a>
                            </div>
                        </div>
                        <p id="user-info">Simple Website</p>
                </div>
                <p id="result-none" class="hidden">Nice! The subdomain is still available, <a href="https://docs.is-a.dev">read more here</a> to register the subdomain!</p>
                <p id="result-error" class="hidden">An Error Occurred while checking the subdomain, please try again...</p>
                <p id="result-reserved" class="hidden">Unfortunately, this domain you are searching is reserved by the developer for development purposes...</p>
            </div>

            <h2>Important Links</h2>
            <ul>
                <li><a href="https://docs.is-a.dev">Documentation</a></li>
                <li><a href="https://github.com/is-a-dev">GitHub</a></li>
                <li><a href="https://discord.gg/is-a-dev-830872854677422150">Discord</a></li>
            </ul>

            <h2>Report Abuse</h2>
            <p>
                If you suspect that a subdomain is abusing the service, please
                <a href="https://github.com/is-a-dev/register/issues/new?labels=report-abuse&template=report-abuse.md&title=Report+abuse"
                    target="_blank">
                    report it here</a>.
            </p>

            <h2>Donations</h2>
            <p>
                This project is a free service for developers and will stay that way. Please consider
                <a href="https://donate.is-a.dev">donating</a> to help us keep this service running forever!
            </p>

            <br>

            <p>&copy; 2020-<script>document.write(new Date().getFullYear())</script> is-a.dev - All Rights Reserved.
                <br>
                A project by <a href="https://wdh.gg">William Harrison</a>.
            </p>
        </main>
        <script>
            let is_searching=false;
            let timer_search=undefined;
            let reserved_domain=undefined;
            const search_domain=document.getElementById('search-domain');
            // result containers
            const result_card=document.getElementById('result-card');
            const result_none=document.getElementById('result-none');
            const result_error=document.getElementById('result-error');
            const result_reserved=document.getElementById('result-reserved');
            // user propagate
            const user_avatar=document.getElementById('user-avatar');
            const user_gh_link=document.getElementById('user-gh-link');
            const user_name=document.getElementById('user-name');
            const user_website_link=document.getElementById('user-website-link');
            const user_info=document.getElementById('user-info');
            
            function check(){
                var search=search_domain.value.trim().replace(' ','-').toLowerCase();
                if(its_reserved(search)){
                    hide_results();
                    result_reserved.classList.toggle('hidden');
                    return;
                }
                if(search ==='' || is_searching) return;
                is_searching=true;
                fetch('https://raw.githubusercontent.com/is-a-dev/register/main/domains/'+search+'.json')
                .then(response => {
                    hide_results();
                    if(!response.ok && response.status !== 404)
                        throw new Error('Something went wrong');
                    return !response.ok? null :
                                        response.json();
                })
                .then(json => {
                    if(json!=null)
                    {
                        json.search=search;
                        propagate_result(json);
                    }
                    else if (result_none.classList.contains('hidden')) 
                        result_none.classList.toggle('hidden');
                })
                .catch((reason)=>{
                    if (result_error.classList.contains('hidden')) result_error.classList.toggle('hidden');
                }).finally(()=>{
                    is_searching=false;
                });
            }

            function propagate_result(data){
                if (result_card.classList.contains('hidden')) result_card.classList.toggle('hidden');
                var gh_link='https://github.com/'+data.owner.username;
                var website_link=data.search+'.is-a.dev';
                user_avatar.src=gh_link+'.png?size=64';
                user_gh_link.href=gh_link;
                user_name.innerHTML=data.owner.username;
                user_website_link.href='https://'+website_link;
                user_website_link.innerHTML=website_link;
                    user_info.textContent=data.description===undefined?'':data.description;
            }

            function hide_results(){
                if (!result_card.classList.contains('hidden')) result_card.classList.toggle('hidden');
                if (!result_none.classList.contains('hidden')) result_none.classList.toggle('hidden');
                if (!result_error.classList.contains('hidden')) result_error.classList.toggle('hidden');
                if (!result_reserved.classList.contains('hidden')) result_reserved.classList.toggle('hidden');
            }

            function its_reserved(domain){
                var s= reserved_domain.filter(function(pattern) {
                        if(pattern.includes('['))
                            return new RegExp(pattern).test(domain);
                        else
                            return domain===pattern;
                        });
                return s.length > 0;
            }

            function fetch_reserve(){
                if(reserved_domain === undefined){
                    if (timer_search!==undefined)
                        clearInterval(timer_search);
                    fetch('https://raw.githubusercontent.com/is-a-dev/register/main/util/reserved.json')
                    .then(response => {
                        if(!response.ok)
                            throw new Error('Something went wrong');
                        return response.json();
                    })
                    .then(data => {
                        reserved_domain=data;
                        timer_search=setTimeout(()=>check(this.value),300);
                    })
                    .catch((reason)=>{
                        
                    });
                    return;
                }
            }

            search_domain.addEventListener('input', function (evt) {
                if(this.value===''){
                    if (timer_search!==undefined){
                        clearInterval(timer_search);
                    }
                    hide_results();
                    return;
                }

                if (timer_search!==undefined)
                    clearInterval(timer_search);

                timer_search=setTimeout(()=>check(this.value),300);
            });

            fetch_reserve();
        </script>
    </body>
</html>
